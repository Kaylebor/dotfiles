{{- if and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "cachyos") (stat "/usr/share/cachyos-fish-config/cachyos-config.fish") }}
source /usr/share/cachyos-fish-config/cachyos-config.fish

{{ end -}}
{{- if eq .chezmoi.os "darwin" }}
# Increase file descriptor limit for development work (macOS)
ulimit -n 65536 2>/dev/null || true

if status is-login
    if test -z "$__SSH_KEYCHAIN_LOADED"
        if command -sq ssh-add
            ssh-add --apple-load-keychain >/dev/null 2>&1
        end
        set -gx __SSH_KEYCHAIN_LOADED 1
    end
end

{{ end -}}

# overwrite greeting
function fish_greeting
end

# Minimal prompt showing current directory and status
function fish_prompt
    set -l color (set_color cyan)
    set -l reset (set_color normal)
    printf '%s%s%s ‚ùØ ' $color (prompt_pwd) $reset
end
