# Mise and Fnox integration for Fish shell
# Only activate for interactive shells to avoid affecting GUI applications

if status --is-interactive
{{- if lookPath "mise" }}
# Load mise shims (minimal PATH modification)
{{ output "mise" "activate" "fish" "--shims" }}

# Load full mise integration (dynamic PATH/env updates on prompt)
{{ output "mise" "activate" "fish" }}

# Load fnox integration for automatic secret loading on cd
# Must come after mise so fnox is in PATH
{{- if lookPath "fnox" }}
fnox activate fish | source
{{- end }}
{{- end }}
end
