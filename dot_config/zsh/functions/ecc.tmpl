#!/usr/bin/env zsh
# GUI emacsclient with fallback editor
{{- $visualFallback := "" }}
{{- if lookPath "zed" }}
{{- $visualFallback = "zed -w" }}
{{- else }}
{{- $visualEditors := list "hx" "nvim" "vim" "vi" }}
{{- range $editor := $visualEditors }}
{{- if lookPath $editor }}
{{- $visualFallback = $editor }}
{{- break }}
{{- end }}
{{- end }}
{{- end }}

if command -v emacsclient >/dev/null 2>&1; then
{{- if $visualFallback }}
    emacsclient -c --alternate-editor="{{ $visualFallback }}" "$@"
{{- else }}
    emacsclient -c "$@"
{{- end }}
else
{{- if $visualFallback }}
    {{ $visualFallback }} "$@"
{{- else }}
    echo "Error: No suitable visual editor found"
    return 1
{{- end }}
fi
