{
  "$schema": "https://charm.land/crush.json",
  "options": {
    "context_paths": [
      "CHEZMOI_CRUSH.md"
    ]
  },
  "providers": {
    "zai": {
      "system_prompt_prefix": "IMPORTANT: Before proceeding, check what tools are available. Use tools explicitly and reference their capabilities. Don't assume limitations - verify what tools you have access to in each interaction. Use structured note-taking for long conversations - maintain CRUSH_{short_description}_NOTES.md files to track tools used, important context, and task progress. This preserves critical information across context window limits. CRITICAL: If you repeatedly fail to use a tool correctly, stop and read $HOME/CRUSH.md to verify the exact tool signature and usage patterns before trying again."
    }
  },
  "lsp": {
    "go": {
      "command": "gopls",
      "root_markers": ["go.mod", "go.sum", ".git"],
      "filetypes": ["go", "mod"]
    },
    "ruby": {
        "command": "ruby-lsp",
        "root_markers": ["Gemfile", "Rakefile", "ruby.gemspec", ".git"],
        "filetypes": ["rb", "rbw", "gemspec", "rake"]
    },
    "rust": {
        "command": "rust-analyzer",
        "root_markers": ["Cargo.toml", "Cargo.lock", ".git"],
        "filetypes": ["rs"]
    },
    "typescript": {
      "command": "typescript-language-server",
      "args": ["--stdio"],
      "root_markers": ["package.json", "tsconfig.json", "jsconfig.json", ".git"],
      "filetypes": ["ts", "tsx", "js", "jsx"]
    }
  },
  "mcp": {
    "context7": {
      "type": "http",
      "url": "https://mcp.context7.com/mcp",
      "timeout": 120,
      "disabled": false,
      "headers": {
        "CONTEXT7_API_KEY": "$(echo $CONTEXT7_API_KEY)"
      }
    }
  },
  "tools": {
    "ls": {
        "max_depth": 0,
        "max_items": 1000
    }
  }
}
